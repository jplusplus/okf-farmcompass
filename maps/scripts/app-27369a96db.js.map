{"version":3,"sources":["/.tmp/scripts/index.js","/.tmp/scripts/app/main/step/step.js","/.tmp/scripts/app/main/about/about.js","/.tmp/scripts/app/components/youtube-background-video/youtube-background-video.directive.js","/.tmp/scripts/app/components/unsafe/unsafe.filter.js","/.tmp/scripts/app/components/i18n/i18n.filter.js","/.tmp/scripts/app/timeline/timeline.directive.js","/.tmp/scripts/app/timeline/timeline.chart.js","/.tmp/scripts/app/main/main.js","/.tmp/scripts/routes.js","/.tmp/scripts/config.js","/.tmp/scripts/scripts/app.js","/.tmp/scripts/app/timeline/timeline.config.js","/.tmp/scripts/templateCacheHtml.js"],"names":["_classCallCheck","instance","Constructor","TypeError","youtubeBackgroundVideoDirective","restrict","link","scope","el","attr","$","addClass","YTPlayer","fitToBackground","videoId","youtubeBackgroundVideo","unsafeFilter","$sce","trustAsHtml","i18nFilter","$translate","hash","use","_","values","first","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","routesConfig","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","otherwise","state","url","component","resolve","$stateParams","language","params","index","dynamic","meta","$http","get","cache","then","r","data","gaRun","$transitions","$window","$location","onSuccess","transition","identifier","targetState","uri","reduce","key","addQueryParam","Uri","ga","name","page","toString","translateConfig","$translateProvider","tmhDynamicLocaleProvider","uiZeroclipConfigProvider","localeLocationPattern","setZcConf","swfPath","useStaticFilesLoader","prefix","suffix","registerAvailableLanguageKeys","*","fr","fr-FR","fr_FR","fr-BE","fr_BE","fr-CA","fr_CA","determinePreferredLanguage","fallbackLanguage","useLocalStorage","useSanitizeValueStrategy","$inject","angular","module","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","protoProps","staticProps","MainStepController","$state","$scope","hotkeys","this","extend","uiOnParamsChanged","next","bind","previous","current","isFirst","isLast","progress","add","combo","callback","_step","Number","go","step","isOutro","is","type","arguments","undefined","trustAs","location","href","templateUrl","controller","bindings","MainAboutController","directive","filter","$filter","Timeline","replace","template","element","_class","_this","i18n","fit","svg","d3","select","timeline","config","bounding","$watch","draw","on","windowResizeEvent","throttle","resize","$on","off","pick","node","getBoundingClientRect","smoothing","yunit","yaxislabel","highlights","rulers","instant","charttype","min","max","css","window","height","offset","top","_windowResizeEvent","uniqueId","constant","chroma","brewer","Spectral","description","units","category","width","padding","bottom","left","right","setter","newValue","kebabCase","service","TIMELINE_CONFIG","TIMELINE_COLORS","_Koto","getPrototypeOf","configs","transitionValues","isHighlighted","updateBubbles","resetBubbles","deleteBubbles","highlightGroups","updateLabel","bindLayer","colors","categoryColors","xScale","scaleLinear","yScale","base","append","area","line","label","attrs","in","stdDeviation","parent","dx","dy","result","in2","operator","x","d","id","y","y0","isStacked","stack","y1","layer","dataBind","rows","reverse","selectAll","insert","selection","classed","style","text","events","enter:transition","t","duration","c","update","update:transition","merge","merge:transition","exit:transition","remove","n","_this2","moveGroup","half","anchorX","each","partial","that","tspans","year","formatY","bbox","getBBox","p","invert","event","layerY","Math","round","layerX","years","sort","a","b","abs","chain","map","row","find","hover","thru","castArray","compact","groups","translate","exit","entering","enter","cx","cy","stroke","stroke-width","fill","mix","contrast","flow","rx","ry","parentNode","pathFn","_this3","clipRect","_this4","_this5","last","hasHighligths","indexOf","_this6","ids","includes","luminance","color","desaturate","hex","_colors","scaleOrdinal","_this7","isNaN","hasOwnProperty","push","mean","_this8","smooth","pop","transpose","group","keys","res","yearStack","begin","end","_this9","isYearVisible","x1","x2","y2","_this10","isLine","range","domain","updateRulers","axisBottom","tickFormat","format","tickValues","slice","tickSize","tickPadding","axisLeft","tickSizeOuter","Koto","MainController","tmhDynamicLocale","set","links","currentLink","not","prop","run","$templateCache","put"],"mappings":"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","file":"../../scripts/app-27369a96db.js","sourcesContent":["'use strict';\n\nangular.module('app', ['ngAnimate', 'ngTouch', 'ngCookies', 'ui.router', 'cfp.hotkeys', 'pascalprecht.translate', 'tmh.dynamicLocale', 'zeroclipboard']);","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MainStepController = function () {\n  function MainStepController($stateParams, $translate, $state, $scope, hotkeys, $sce, $window) {\n    'ngInject';\n\n    _classCallCheck(this, MainStepController);\n\n    angular.extend(this, { $state: $state, $scope: $scope, $sce: $sce, $window: $window });\n    // Initialize\n    this.uiOnParamsChanged($stateParams);\n    // Copy translate's use method\n    this.use = $translate.use;\n    // Bind local method to this\n    this.next = this.next.bind(this);\n    this.previous = this.previous.bind(this);\n    this.current = this.current.bind(this);\n    this.isFirst = this.isFirst.bind(this);\n    this.isLast = this.isLast.bind(this);\n    this.progress = this.progress.bind(this);\n    this.current = this.current.bind(this);\n    // Bind hot keys\n    hotkeys.add({ combo: ['left'], callback: this.previous });\n    hotkeys.add({ combo: ['space', 'right'], callback: this.next });\n  }\n\n  _createClass(MainStepController, [{\n    key: 'uiOnParamsChanged',\n    value: function uiOnParamsChanged(params) {\n      this._step = Number(params.index || 0);\n    }\n  }, {\n    key: 'next',\n    value: function next() {\n      if (this.isLast()) {\n        this.$state.go('main.step.outro');\n      } else {\n        this.$state.go('main.step', { index: this.step + 1 });\n      }\n    }\n  }, {\n    key: 'previous',\n    value: function previous() {\n      if (this.isOutro()) {\n        this.$state.go('main.step');\n      } else if (this.isFirst()) {\n        this.$state.go('main');\n      } else if (this.step > 0) {\n        this.$state.go('main.step', { index: this.step - 1 });\n      }\n    }\n  }, {\n    key: 'isFirst',\n    value: function isFirst() {\n      return this.step === 0;\n    }\n  }, {\n    key: 'isLast',\n    value: function isLast() {\n      return this.step === this.meta.length - 1;\n    }\n  }, {\n    key: 'isOutro',\n    value: function isOutro() {\n      return this.$state.is('main.step.outro');\n    }\n  }, {\n    key: 'current',\n    value: function current() {\n      return this.meta[this.step];\n    }\n  }, {\n    key: 'progress',\n    value: function progress() {\n      return (this.step + this.isOutro()) / this.meta.length * 100;\n    }\n  }, {\n    key: 'trustAs',\n    value: function trustAs() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'HTML';\n      var value = arguments[1];\n\n      return this.$sce.trustAs(this.$sce[type], value);\n    }\n  }, {\n    key: 'step',\n    get: function get() {\n      return this._step;\n    }\n  }, {\n    key: 'location',\n    get: function get() {\n      return this.$window.location.href;\n    }\n  }]);\n\n  return MainStepController;\n}();\n\nangular.module('app').component('main.step', {\n  templateUrl: 'app/main/step/step.html',\n  controller: MainStepController,\n  bindings: {\n    meta: '<'\n  }\n});","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MainAboutController = function MainAboutController() {\n  'ngInject';\n\n  _classCallCheck(this, MainAboutController);\n};\n\nangular.module('app').component('main.about', {\n  templateUrl: 'app/main/about/about.html',\n  controller: MainAboutController\n});","'use strict';\n\nangular.module('app').directive('youtubeBackgroundVideo', youtubeBackgroundVideoDirective);\n\n/** @ngInject */\nfunction youtubeBackgroundVideoDirective() {\n  return {\n    restrict: 'A',\n    link: function link(scope, el, attr) {\n      $(el).addClass('youtube-background-video').YTPlayer({\n        fitToBackground: true,\n        videoId: attr.youtubeBackgroundVideo\n      });\n    }\n  };\n}","'use strict';\n\nangular.module('app').filter('unsafe', unsafeFilter);\n\n/** @ngInject */\nfunction unsafeFilter($sce) {\n  return $sce.trustAsHtml;\n}","'use strict';\n\nangular.module('app').filter('i18n', i18nFilter);\n\n/** @ngInject */\nfunction i18nFilter($translate) {\n  return function (hash) {\n    return hash[$translate.use()] || _(hash).values().first();\n  };\n}","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nangular.module('app').directive('timeline', function ($window, $filter, $translate, Timeline) {\n  return {\n    restrict: 'E',\n    scope: {\n      meta: '=',\n      step: '='\n    },\n    replace: true,\n    template: '<div class=\"timeline\"><svg class=\"timeline__chart\"></svg></div>',\n    link: function link(scope, element) {\n      return new (function () {\n        function _class() {\n          var _this = this;\n\n          _classCallCheck(this, _class);\n\n          // Get i18n filter function\n          this.i18n = $filter('i18n');\n          // Resize the parent element to fit to the screen\n          this.fit();\n          // Create a SVG and append it to the element\n          this.svg = d3.select(element[0]).select('svg');\n          // Create a Timeline instance\n          this.timeline = new Timeline(this.svg);\n          // Use dynamic sizes\n          this.timeline.config(this.bounding());\n          // Watch for change on the step attribute\n          scope.$watch('step', function (step) {\n            // Don't go too far!\n            if (step < scope.meta.length) {\n              // Draw the timeline at a given step\n              _this.draw(step);\n            }\n          });\n          // Watch for windows resize\n          angular.element($window).on(this.windowResizeEvent, _.throttle(this.resize.bind(this), 150));\n          // Watch for scope destruction\n          scope.$on('$destroy', function () {\n            return angular.element($window).off(_this.windowResizeEvent);\n          });\n        }\n\n        _createClass(_class, [{\n          key: 'bounding',\n          value: function bounding() {\n            // Get SVG sizes\n            return _.pick(this.svg.node().getBoundingClientRect(), ['width', 'height']);\n          }\n          // Get last available data for the given step\n\n        }, {\n          key: 'data',\n          value: function data(step) {\n            return step >= 0 ? scope.meta[step].data || this.data(step - 1) : [];\n          }\n        }, {\n          key: 'smoothing',\n          value: function smoothing(step) {\n            return (scope.meta[step] || {}).smoothing || 0;\n          }\n        }, {\n          key: 'draw',\n          value: function draw(step) {\n            this.timeline.config({\n              yunit: this.i18n(scope.meta[step].yaxislabel),\n              highlights: this.i18n(scope.meta[step].highlights),\n              smoothing: this.smoothing(step),\n              rulers: [[2004, $translate.instant('timeline.rulers.10-new-country')], [2007, $translate.instant('timeline.rulers.romania-bulgaria')], [2013, $translate.instant('timeline.rulers.croatia')]],\n              type: scope.meta[step].charttype,\n              min: scope.meta[step].min,\n              max: scope.meta[step].max\n            });\n            // Configure the chart with the new step\n            this.timeline.draw(this.data(step));\n          }\n        }, {\n          key: 'resize',\n          value: function resize() {\n            // Parent element must fit to the new window's height\n            this.fit();\n            // Use dynamic sizes\n            this.timeline.config(this.bounding());\n            // And redraw at the current step\n            this.draw(scope.step);\n          }\n        }, {\n          key: 'fit',\n          value: function fit() {\n            angular.element(element).css('height', angular.element(window).height() - angular.element(element).offset().top);\n          }\n          // Uniq event on window element to destroy it with the directive\n\n        }, {\n          key: 'windowResizeEvent',\n          get: function get() {\n            // Create the event tken only once\n            this._windowResizeEvent = this._windowResizeEvent || _.uniqueId() + ' resize';\n            // Simply return the event string\n            return this._windowResizeEvent;\n          }\n        }]);\n\n        return _class;\n      }())();\n    }\n  };\n});","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nangular.module('app').service('Timeline', function (TIMELINE_CONFIG, TIMELINE_COLORS, $translate, $filter) {\n  var Timeline = function (_Koto) {\n    _inherits(Timeline, _Koto);\n\n    function Timeline(svg) {\n      _classCallCheck(this, Timeline);\n\n      // define configs\n      var _this = _possibleConstructorReturn(this, (Timeline.__proto__ || Object.getPrototypeOf(Timeline)).call(this, svg));\n\n      _this.configs = TIMELINE_CONFIG;\n\n      // Bind local method to this\n      _this.transitionValues = _this.transitionValues.bind(_this);\n      _this.isHighlighted = _this.isHighlighted.bind(_this);\n      _this.updateBubbles = _this.updateBubbles.bind(_this);\n      _this.resetBubbles = _this.resetBubbles.bind(_this);\n      _this.deleteBubbles = _this.deleteBubbles.bind(_this);\n      _this.highlightGroups = _this.highlightGroups.bind(_this);\n      _this.updateLabel = _this.updateLabel.bind(_this);\n      _this.bindLayer = _this.bindLayer.bind(_this);\n      _this.colors = _this.colors.bind(_this);\n      _this.categoryColors = _this.categoryColors.bind(_this);\n\n      // Create scale\n      _this.xScale = d3.scaleLinear();\n      _this.yScale = d3.scaleLinear();\n\n      // Create axis's layers\n      _this.base.append(\"g.axis.axis--x\");\n      _this.base.append(\"g.axis.axis--y\");\n      // Create ruler layer\n      _this.base.append('g.ruler');\n      // Create shapes layers\n      var area = _this.base.append('g.area');\n      var line = _this.base.append('g.line');\n      var label = _this.base.append('g.label');\n      // Create interaction layer\n      _this.base.append('rect.event').on('mousemove', _this.updateBubbles).on('mouseout', _this.resetBubbles);\n      // Create a bubbles layer\n      _this.base.append('g.bubble');\n\n      // Create a drop-shadow filter\n      _this.base.append('filter#dropshadow').attrs({ height: '130%' }).append('feGaussianBlur').attrs({ in: 'SourceAlpha', stdDeviation: 2 }).select(_this.parent).append('feOffset').attrs({ dx: 0, dy: 2, result: 'offsetblur' }).select(_this.parent).append('feFlood').attr('flood-opacity', 0.4).select(_this.parent).append('feComposite').attrs({ in2: \"offsetblur\", operator: \"in\" }).select(_this.parent).append('feMerge').append('feMergeNode').select(_this.parent).append('feMergeNode').attr('in', \"SourceGraphic\");\n\n      // Function to draw a line\n      _this.line = d3.line().x(function (d) {\n        return _this.xScale(d.id);\n      }).y(function (d) {\n        return _this.yScale(d.value);\n      });\n\n      // Function to draw an area\n      _this.area = d3.area().x(function (d) {\n        return _this.xScale(d.id);\n      }).y0(function (d) {\n        return _this.isStacked ? _this.yScale(d.stack[0]) : _this.height;\n      }).y1(function (d) {\n        return _this.yScale(d.value);\n      });\n\n      // Setup areas' layer\n      _this.layer('area', area, angular.extend(_this.bindLayer(_this.area), {\n        dataBind: function dataBind(data) {\n          // Disable on lines\n          var rows = data.type === 'line' ? [] : data.rows.reverse();\n          return this.selectAll('.area__group').data(rows, function (d) {\n            return d.id;\n          });\n        },\n        insert: function insert(selection) {\n          // Add the path to the current selection and clip its path the rect\n          return selection.append('path.area__group').classed('highlighted', _this.isHighlighted).style('opacity', function (d) {\n            return _this.isHighlighted(d) ? 1 : 0.3;\n          }).attr('d', function (d) {\n            return _this.area(d.values);\n          }).style('fill', _this.colors);\n        }\n      }));\n      // Setup lines' layer\n      _this.layer('line', line, angular.extend(_this.bindLayer(_this.line), {\n        dataBind: function dataBind(data) {\n          return this.selectAll('.line__group').data(data.rows, function (d) {\n            return d.id;\n          });\n        },\n        insert: function insert(selection) {\n          // Add the path to the current selection and clip its path the rect\n          return selection.append('path.line__group').classed('highlighted', _this.isHighlighted).style('opacity', function (d) {\n            return _this.isHighlighted(d) ? 1 : 0.3;\n          }).attr('d', function (d) {\n            return _this.line(d.values);\n          }).style('stroke', _this.colors);\n        }\n      }));\n      // Setup labels layer\n      _this.layer('label', label, {\n        dataBind: function dataBind(data) {\n          return this.selectAll('.label text').data(data.rows, function (d) {\n            return d.id;\n          });\n        },\n        insert: function insert(selection) {\n          return selection.append('text').text(function (d) {\n            return d.id;\n          }).classed('highlighted', _this.isHighlighted).attr(\"text-anchor\", \"end\").attr(\"dy\", '-1em').attr(\"dx\", '-1em').call(_this.updateLabel).style('opacity', 0);\n        },\n        events: {\n          'enter:transition': function enterTransition(t) {\n            return t.duration(_this.c('transition')).style('opacity', 1);\n          },\n          'update': function update(selection) {\n            return selection.classed('highlighted', _this.isHighlighted);\n          },\n          'update:transition': function updateTransition(t) {\n            return t.duration(_this.c('transition')).call(_this.updateLabel);\n          },\n          'merge': function merge(selection) {\n            return selection.classed('highlighted', _this.isHighlighted);\n          },\n          'merge:transition': function mergeTransition(t) {\n            return t.duration(_this.c('transition')).call(_this.updateLabel);\n          },\n          'exit:transition': function exitTransition(t) {\n            return t.duration(_this.c('transition')).style('opacity', 0).remove();\n          }\n        }\n      });\n      return _this;\n    }\n\n    _createClass(Timeline, [{\n      key: 'formatY',\n      value: function formatY(n) {\n        return $filter('number')(n, 0);\n      }\n    }, {\n      key: 'updateBubbles',\n      value: function updateBubbles() {\n        var _this2 = this;\n\n        // Helper function to move all groups\n        var moveGroup = function moveGroup(selection) {\n          selection.attr('transform', function (d) {\n            return 'translate(' + _this2.c('padding').left + ', ' + _this2.yScale(d.value) + ')';\n          });\n          // Move text with the right anchor\n          selection.select('text').attr('text-anchor', _this2.half < anchorX ? 'end' : 'start').each(_.partial(function insert(that) {\n            var text = d3.select(this);\n            // Remove all children from text element\n            text.selectAll(\"*\").remove();\n            // Add values on multiline\n            text.tspans(function (d) {\n              return [d.year, d.id, that.formatY(d.value)];\n            });\n            // Get size of the text box\n            var bbox = text.node().getBBox();\n            text.attrs({ y: that.c('padding').top });\n            // To add padding outside the box\n            var p = 2;\n            // Add rect as background\n            selection.select('rect').attrs({\n              x: bbox.x - p * 2,\n              y: bbox.y - p,\n              width: bbox.width + 4 * p,\n              height: bbox.height + 2 * p\n            });\n          }, _this2));\n          return selection;\n        };\n        // Get the value for this y position\n        var value = this.yScale.invert(d3.event.layerY);\n        // Year value at this for this x position\n        var y = Math.round(this.xScale.invert(d3.event.layerX));\n        // Get the closest year in the dataset\n        var year = _.first(this.data.years.sort(function (a, b) {\n          return Math.abs(y - a) - Math.abs(y - b);\n        }));\n        // Get the anchor value for this year\n        var anchorX = this.xScale(year);\n        // Simplify rows to extract only the data for the current year\n        var data = _.chain(this.data.rows).map(function (r) {\n          var row = _.find(r.values, { id: year });\n          return angular.extend(r, {\n            year: year,\n            value: row.value,\n            hover: value >= row.stack[0] && value <= row.stack[1]\n          });\n          // Then find the closest group according to y position\n        }).thru(function (rows) {\n          if (_this2.isStacked) {\n            rows = _.filter(rows, { hover: true });\n          } else {\n            rows = rows.sort(function (a, b) {\n              // Iterate over every row to find the smallest distance\n              return Math.abs(value - a.value) - Math.abs(value - b.value);\n            });\n          }\n          return rows;\n          // Return an array with only the irst value\n        }).first().castArray().compact().value();\n        // The layer that holds bubbles\n        var groups = this.base.select('.bubble')\n        // Move the layer on the right year\n        .call(this.translate(anchorX, this.c('padding').top))\n        // Create group for each row\n        .selectAll('.bubble__group')\n        // JOIN data to for the selected year\n        .data(data, function (d) {\n          return d.id;\n        });\n        // REMOVE old bubbles\n        groups.exit().remove();\n        // UPDATE current bubbles\n        groups.call(moveGroup);\n        // CREATE new bubbles\n        var entering = groups.enter().append('g').classed('bubble__group', true);\n        // Add corner points\n        entering.append('circle').attrs({\n          'cx': 0, 'cy': 0, 'r': 5,\n          'stroke': this.categoryColors,\n          'stroke-width': 5,\n          'fill': function fill(d) {\n            var c = _this2.categoryColors(d);\n            return chroma.mix(c, _this2.contrast(c));\n          }\n        });\n        // Add text label\n        entering.append('text').style('fill', _.flow(this.categoryColors, this.contrast));\n        // Add text background\n        entering.insert('rect', ':first-child').attrs({ rx: 2, ry: 2 }).style('fill', this.categoryColors);\n        entering.attr('fill', 'red').style('filter', 'url(#dropshadow)').call(moveGroup);\n        // Highlight groups\n        this.highlightGroups(_.map(data, 'id'));\n      }\n    }, {\n      key: 'resetBubbles',\n      value: function resetBubbles() {\n        // Delete all bubbles\n        this.deleteBubbles();\n        // Remove highlighted groups by passing an empty array of ids\n        this.highlightGroups();\n      }\n    }, {\n      key: 'deleteBubbles',\n      value: function deleteBubbles() {\n        this.base.selectAll('.bubble__group').remove();\n      }\n    }, {\n      key: 'parent',\n      value: function parent() {\n        return this.parentNode;\n      }\n    }, {\n      key: 'bindLayer',\n      value: function bindLayer(pathFn) {\n        var _this3 = this;\n\n        return {\n          events: {\n            enter: function enter(selection) {\n              // Create a unique id for this element clip\n              var id = _.uniqueId('rectClip-');\n              // Add the clip to the current selection\n              var clipRect = _this3.base.append(\"clipPath\").attr(\"id\", id).append(\"rect\");\n              // Clip path to the current selection\n              selection.attr('clip-path', 'url(#' + id + ')');\n              // Apply the transition on the clip's rect\n              clipRect.attrs({ width: 0, height: _this3.height }).transition().duration(_this3.c('transition')).attr('width', _this3.width)\n              // After the transition ends\n              .on(\"end\", function end() {\n                // Remove the clip-path from the selection\n                selection.attr('clip-path', null);\n                // And remove its holding element\n                d3.select(this.parentNode).remove();\n              });\n            },\n            merge: this.transitionValues(pathFn),\n            update: this.transitionValues(pathFn),\n            exit: function exit(selection) {\n              selection.transition().duration(_this3.c('transition')).style('opacity', 0).on('end', function () {\n                return selection.remove();\n              });\n            }\n          }\n        };\n      }\n    }, {\n      key: 'transitionValues',\n      value: function transitionValues(pathFn) {\n        var _this4 = this;\n\n        return function (selection) {\n          selection.transition().duration(_this4.c('transition')).style('opacity', function (d) {\n            return _this4.isHighlighted(d) ? 1 : 0.3;\n          }).attr(\"d\", function (d) {\n            return pathFn(d.values);\n          });\n        };\n      }\n    }, {\n      key: 'updateLabel',\n      value: function updateLabel(selection) {\n        var _this5 = this;\n\n        return selection.attr(\"x\", function (d) {\n          return _this5.xScale(_.last(d.values).id);\n        }).attr(\"y\", function (d) {\n          var row = _.last(d.values);\n          return _this5.yScale(row.value);\n        });\n      }\n    }, {\n      key: 'isHighlighted',\n      value: function isHighlighted(d) {\n        return !this.hasHighligths || this.c('highlights').indexOf(d.id) > -1;\n      }\n    }, {\n      key: 'highlightGroups',\n      value: function highlightGroups() {\n        var _this6 = this;\n\n        var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        // True if the given set of ids includes the selection\n        var includes = function includes(d) {\n          return ids.indexOf(d.id) > -1;\n        };\n        // Change opacity and stroke accordingly\n        this.base.selectAll('.line__group,.area__group').style('opacity', function (d) {\n          return includes(d) || _this6.isHighlighted(d) ? 1 : 0.3;\n        });\n        this.base.selectAll('.line__group').style('stroke', function (d) {\n          return includes(d) ? _this6.categoryColors(d) : _this6.colors(d);\n        });\n        this.base.selectAll('.area__group').style('fill', function (d) {\n          return includes(d) ? _this6.categoryColors(d) : _this6.colors(d);\n        });\n      }\n    }, {\n      key: 'contrast',\n      value: function contrast(c) {\n        return chroma(c).luminance() > 0.5 ? 'black' : 'white';\n      }\n    }, {\n      key: 'colors',\n      value: function colors(d) {\n        // return a different color if the element is not highlighted\n        var color = this.categoryColors(d);\n        // return a different color if the element is not highlighted\n        return this.isHighlighted(d) ? color : chroma(color).desaturate(1).hex();\n      }\n    }, {\n      key: 'categoryColors',\n      value: function categoryColors(d) {\n        // Create color schema if undefined\n        if (!this._colors) {\n          this._colors = d3.scaleOrdinal(TIMELINE_COLORS);\n        }\n        return this._colors(d.id);\n      }\n    }, {\n      key: 'smooth',\n      value: function smooth(hash) {\n        var _this7 = this;\n\n        // Iterate over the hash\n        _.each(hash, function (value, key) {\n          // Skip non-numeric keys and the first year\n          if (!isNaN(key) && hash.hasOwnProperty(Number(key) - 1)) {\n            // Every values to use in the moving average\n            var values = [];\n            // Go backward and forward the current year\n            for (var i = -_this7.c('smoothing'); i <= _this7.c('smoothing'); i++) {\n              // Build the hash key to the year\n              var year = Number(key) + i;\n              // Since the mean function ignore undefined element, we do not check\n              // that there is a value for the year!\n              values.push(hash[year]);\n            }\n            // Calculate the mean for all values\n            hash[key] = d3.mean(values);\n          }\n        });\n        return hash;\n      }\n    }, {\n      key: 'transform',\n      value: function transform(data) {\n        var _this8 = this;\n\n        // Extract years from the first line\n        var years = this.years(data[0]);\n        // Smooth all the rows\n        data = data.map(this.smooth.bind(this));\n        // Get groups of data\n        var groups = _.chain(data).map(function (r) {\n          return _.values(r).pop();\n        }).value();\n        // Transpose data to be able to stack them\n        var transpose = _.map(years, function (year) {\n          return angular.extend({ year: year }, _.reduce(groups, function (hash, group, i) {\n            hash[group] = data[i][year];\n            return hash;\n          }, {}));\n        });\n        // Stack data for stacked representation\n        var stack = d3.stack().keys(groups)(transpose);\n        // Create an object for each group\n        var rows = _.reduce(data, function (res, hash, i) {\n          // Create a new object as row, describing this group\n          res.push({\n            // The last element of this hash is the group id\n            id: $translate.instant('timeline.labels.' + hash.label),\n            // Collect value for each year\n            values: _.map(years, function (year) {\n              // Create a stack for this year\n              var yearStack = _.find(stack[i], function (d) {\n                return d.data.year === year;\n              });\n              // Returns a hash\n              return {\n                id: year,\n                stack: yearStack,\n                value: _this8.isStacked ? yearStack[1] : hash[year]\n              };\n            })\n          });\n          return res;\n        }, []);\n        // Return an object with several precalculated fields\n        return {\n          years: years, rows: rows, stack: stack,\n          // Save the type of the chart for nested access\n          type: this.c('type'),\n          // First year in this dataset\n          begin: years[0],\n          // Last year in this dataset\n          end: years[years.length - 1],\n          // Minimum value among all row\n          min: d3.min(rows, function (c) {\n            return d3.min(c.values, function (d) {\n              return _this8.isStacked ? d.stack[0] : d.value;\n            });\n          }),\n          // Maximum value among all row\n          max: d3.max(rows, function (c) {\n            return d3.max(c.values, function (d) {\n              return d.value;\n            });\n          })\n        };\n      }\n    }, {\n      key: 'years',\n      value: function years(hash) {\n        // Extract year from a given object\n        return _.chain(hash).keys().remove(function (y) {\n          return !isNaN(y);\n        }).map(function (y) {\n          return Number(y);\n        }).sort().value();\n      }\n    }, {\n      key: 'translate',\n      value: function translate() {\n        var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        return function (selection) {\n          return selection.attr('transform', 'translate(' + left + ', ' + top + ')');\n        };\n      }\n    }, {\n      key: 'isYearVisible',\n      value: function isYearVisible(year) {\n        // Year must strictly in bounds\n        return year >= this.data.begin && year < this.data.end;\n      }\n    }, {\n      key: 'updateRulers',\n      value: function updateRulers() {\n        var _this9 = this;\n\n        var t = d3.transition().duration(this.c('transition'));\n        var moveGroup = function moveGroup(selection) {\n          return selection.attr('transform', function (d) {\n            var left = _this9.c('padding').left + _this9.xScale(d[0]);\n            var top = _this9.c('padding').top;\n            return 'translate(' + left + ', ' + top + ')';\n          });\n        };\n        var data = this.c('rulers');\n        // Reove rulers that are under 0\n        data = data.filter(function (d) {\n          return _this9.isYearVisible(d[0]);\n        });\n        // JOIN new data to rulers\n        var rulers = this.base.select('.ruler').selectAll('.ruler__group').data(data, function (d) {\n          return d[0];\n        });\n        // REMOVE old rulers\n        rulers.exit().transition(t).style(\"opacity\", 0).remove();\n        // UPDATE old rulers\n        rulers.transition(t).call(moveGroup).style('opacity', 1);\n        rulers.selectAll('line').transition(t).attr('y2', this.height);\n        // CREATE new rulers\n        var groups = rulers.enter().append('g').classed('ruler__group', true);\n        // Move the new ruler to the right position\n        groups.call(moveGroup).style('opacity', 0).transition(t).style('opacity', 1);\n        groups.append('line').attrs({ x1: 0, y1: 0, x2: 0, y2: this.height });\n        groups.append('text').text(function (d) {\n          return d[1];\n        }).attrs({ dy: '.85em', dx: '1em' });\n      }\n    }, {\n      key: 'preDraw',\n      value: function preDraw(data) {\n        var _this10 = this;\n\n        var p = this.c('padding');\n        var min = this.c('min');\n        var max = this.c('max');\n        // Fixed minimum value\n        if (min === null) {\n          min = this.isLine ? Math.max(data.min - (data.max - data.min) * 1 / 8, 0) : data.min;\n        }\n        // Fixed maximum value\n        if (max === null) {\n          max = data.max + (data.max - data.min) * 1 / 8;\n        }\n        // Save the data before the chart is rendered\n        this.data = data;\n        // Set xScale according to the size of the container and the last year\n        this.xScale.range([0, this.width]).domain([data.begin, data.end]);\n        this.yScale.range([this.height, 0]).domain([min, max]);\n        // Set sizes explicitely\n        this.base.attr(_.pick(this, ['width', 'height']));\n        this.base.classed('timeline__chart--highlights', this.hasHighligths);\n        this.base.selectAll('.line, .area, .event, .label').call(this.translate(p.left, p.top));\n        // Update rulers according to the new scales\n        this.updateRulers();\n        // Remove existing bubble\n        this.deleteBubbles();\n        // Resize interaction layer\n        this.base.select('.event').attrs(_.pick(this, ['width', 'height'])).call(this.translate(p.left, p.top));\n        // Select the existing X axis to update it\n        this.base.select('.axis--x').call(this.translate(p.left, this.height + p.top))\n        // Animate the axis creation/update\n        .transition().duration(this.c('transition')).call(d3.axisBottom(this.xScale).tickFormat(d3.format('')).tickValues(data.years.slice(1, -1)).tickSize(0).tickPadding(10));\n        // Select the existing Y axis to update it\n        this.base.select('.axis--y').call(this.translate(p.left, p.top))\n        // Animate the axis creation/update\n        .transition().duration(this.c('transition')).call(d3.axisLeft(this.yScale).tickSizeOuter(0).tickFormat(this.formatY).tickSize(-this.width))\n        // After the transition ends\n        .on(\"end\", function () {\n          // Add unit  to the last child\n          _this10.base.select('.axis--y .tick:last-child text').text(function (d) {\n            return _this10.formatY(d) + ' ' + (_this10.c('yunit') || '');\n          });\n        });\n        // Changed text alignment on y axis\n        this.base.selectAll('.axis--y text').attr(\"y\", 2).attr(\"x\", 0).attr(\"dx\", \"4px\").attr(\"dy\", \"-1em\").style(\"text-anchor\", \"start\");\n      }\n    }, {\n      key: 'width',\n      get: function get() {\n        return this.c('width') - this.c('padding').left - this.c('padding').right;\n      }\n    }, {\n      key: 'height',\n      get: function get() {\n        return this.c('height') - this.c('padding').top - this.c('padding').bottom;\n      }\n    }, {\n      key: 'half',\n      get: function get() {\n        return this.width / 2;\n      }\n    }, {\n      key: 'isStacked',\n      get: function get() {\n        return this.c('type') === 'stacked-area';\n      }\n    }, {\n      key: 'isLine',\n      get: function get() {\n        return this.c('type') === 'line';\n      }\n    }, {\n      key: 'isArea',\n      get: function get() {\n        return this.c('type') === 'area';\n      }\n    }, {\n      key: 'hasHighligths',\n      get: function get() {\n        return this.c('highlights').length > 0;\n      }\n    }]);\n\n    return Timeline;\n  }(Koto);\n\n  return Timeline;\n});","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MainController = function MainController($http, $translate, tmhDynamicLocale) {\n  'ngInject';\n  // Preload meta for the next step\n\n  _classCallCheck(this, MainController);\n\n  $http.get('data/meta.json', { cache: true }).then(function (r) {\n    return r.data;\n  });\n  // Change locale once\n  tmhDynamicLocale.set($translate.use().slice(0, 2));\n  // Get all links markup\n  var links = angular.element('head link[type=\\'text/css\\']');\n  // Current stylesheet\n  var currentLink = links.filter('[title=\\'index@' + $translate.use() + '\\']');\n  // Load the right stylesheet\n  links.not(currentLink).prop('disabled', true);\n  currentLink.prop('disabled', false);\n};\n\nangular.module('app').component('main', {\n  templateUrl: 'app/main/main.html',\n  controller: MainController\n});","'use strict';\n\nangular.module('app').config(routesConfig).run(gaRun);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  $locationProvider.html5Mode(false);\n  $urlRouterProvider.otherwise('/en_BE');\n\n  $stateProvider.state('main', {\n    url: '/:language',\n    component: 'main',\n    resolve: {\n      use: function use($translate, $stateParams) {\n        'ngInject';\n\n        return $translate.use($stateParams.language);\n      }\n    }\n  }).state('main.about', {\n    component: 'main.about',\n    url: '/about'\n  }).state('main.step', {\n    component: 'main.step',\n    // url: 'playing/:index',\n    params: {\n      index: {\n        value: null,\n        dynamic: true\n      }\n    },\n    resolve: {\n      meta: function meta($http) {\n        'ngInject';\n\n        return $http.get('data/meta.json', { cache: true }).then(function (r) {\n          return r.data;\n        });\n      }\n    }\n  }).state('main.step.outro', {\n    //url: '/outro'\n  });\n}\n\n/** @ngInject */\nfunction gaRun($transitions, $window, $location) {\n  // Redirect to login if route requires auth and you're not logged in\n  $transitions.onSuccess({}, function (transition, state) {\n    var identifier = transition.targetState().identifier();\n    // Build parameters string\n    var uri = _.reduce(transition.targetState().params(), function (uri, value, key) {\n      return uri.addQueryParam(key, value);\n    }, new Uri($location.url()));\n    // Send 'pageview' to Google Analytics\n    $window.ga('send', 'pageview', {\n      name: identifier.name || identifier,\n      page: uri.toString()\n    });\n  });\n}","'use strict';\n\nangular.module('app').config(translateConfig);\n\n/** @ngInject */\nfunction translateConfig($translateProvider, tmhDynamicLocaleProvider, uiZeroclipConfigProvider) {\n  'ngInject';\n  // Load current locale\n\n  tmhDynamicLocaleProvider.localeLocationPattern('//code.angularjs.org/1.2.20/i18n/angular-locale_{{locale}}.js');\n  // config ZeroClipboard\n  uiZeroclipConfigProvider.setZcConf({\n    swfPath: 'bower_components/zeroclipboard/dist/ZeroClipboard.swf'\n  });\n  // Configure Angular Translate\n  $translateProvider.useStaticFilesLoader({\n    prefix: 'locales/',\n    suffix: '.json'\n  }).registerAvailableLanguageKeys(['en_BE', 'fr_FR'], {\n    '*': 'en_BE',\n    'fr': 'fr_FR',\n    'fr-FR': 'fr_FR',\n    'fr_FR': 'fr_FR',\n    'fr-BE': 'fr_FR',\n    'fr_BE': 'fr_FR',\n    'fr-CA': 'fr_FR',\n    'fr_CA': 'fr_FR'\n  }).determinePreferredLanguage().fallbackLanguage('en_BE').useLocalStorage().useSanitizeValueStrategy(null);\n}","'use strict';\n\nunsafeFilter.$inject = [\"$sce\"];\ni18nFilter.$inject = [\"$translate\"];\nroutesConfig.$inject = [\"$stateProvider\", \"$urlRouterProvider\", \"$locationProvider\"];\ngaRun.$inject = [\"$transitions\", \"$window\", \"$location\"];\ntranslateConfig.$inject = [\"$translateProvider\", \"tmhDynamicLocaleProvider\", \"uiZeroclipConfigProvider\"];\nangular.module('app', ['ngAnimate', 'ngTouch', 'ngCookies', 'ui.router', 'cfp.hotkeys', 'pascalprecht.translate', 'tmh.dynamicLocale', 'zeroclipboard']);\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MainStepController = function () {\n  MainStepController.$inject = [\"$stateParams\", \"$translate\", \"$state\", \"$scope\", \"hotkeys\", \"$sce\", \"$window\"];\n  function MainStepController($stateParams, $translate, $state, $scope, hotkeys, $sce, $window) {\n    'ngInject';\n\n    _classCallCheck(this, MainStepController);\n\n    angular.extend(this, { $state: $state, $scope: $scope, $sce: $sce, $window: $window });\n    // Initialize\n    this.uiOnParamsChanged($stateParams);\n    // Copy translate's use method\n    this.use = $translate.use;\n    // Bind local method to this\n    this.next = this.next.bind(this);\n    this.previous = this.previous.bind(this);\n    this.current = this.current.bind(this);\n    this.isFirst = this.isFirst.bind(this);\n    this.isLast = this.isLast.bind(this);\n    this.progress = this.progress.bind(this);\n    this.current = this.current.bind(this);\n    // Bind hot keys\n    hotkeys.add({ combo: ['left'], callback: this.previous });\n    hotkeys.add({ combo: ['space', 'right'], callback: this.next });\n  }\n\n  _createClass(MainStepController, [{\n    key: 'uiOnParamsChanged',\n    value: function uiOnParamsChanged(params) {\n      this._step = Number(params.index || 0);\n    }\n  }, {\n    key: 'next',\n    value: function next() {\n      if (this.isLast()) {\n        this.$state.go('main.step.outro');\n      } else {\n        this.$state.go('main.step', { index: this.step + 1 });\n      }\n    }\n  }, {\n    key: 'previous',\n    value: function previous() {\n      if (this.isOutro()) {\n        this.$state.go('main.step');\n      } else if (this.isFirst()) {\n        this.$state.go('main');\n      } else if (this.step > 0) {\n        this.$state.go('main.step', { index: this.step - 1 });\n      }\n    }\n  }, {\n    key: 'isFirst',\n    value: function isFirst() {\n      return this.step === 0;\n    }\n  }, {\n    key: 'isLast',\n    value: function isLast() {\n      return this.step === this.meta.length - 1;\n    }\n  }, {\n    key: 'isOutro',\n    value: function isOutro() {\n      return this.$state.is('main.step.outro');\n    }\n  }, {\n    key: 'current',\n    value: function current() {\n      return this.meta[this.step];\n    }\n  }, {\n    key: 'progress',\n    value: function progress() {\n      return (this.step + this.isOutro()) / this.meta.length * 100;\n    }\n  }, {\n    key: 'trustAs',\n    value: function trustAs() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'HTML';\n      var value = arguments[1];\n\n      return this.$sce.trustAs(this.$sce[type], value);\n    }\n  }, {\n    key: 'step',\n    get: function get() {\n      return this._step;\n    }\n  }, {\n    key: 'location',\n    get: function get() {\n      return this.$window.location.href;\n    }\n  }]);\n\n  return MainStepController;\n}();\n\nangular.module('app').component('main.step', {\n  templateUrl: 'app/main/step/step.html',\n  controller: MainStepController,\n  bindings: {\n    meta: '<'\n  }\n});\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MainAboutController = function MainAboutController() {\n  'ngInject';\n\n  _classCallCheck(this, MainAboutController);\n};\n\nangular.module('app').component('main.about', {\n  templateUrl: 'app/main/about/about.html',\n  controller: MainAboutController\n});\n'use strict';\n\nangular.module('app').directive('youtubeBackgroundVideo', youtubeBackgroundVideoDirective);\n\n/** @ngInject */\nfunction youtubeBackgroundVideoDirective() {\n  return {\n    restrict: 'A',\n    link: function link(scope, el, attr) {\n      $(el).addClass('youtube-background-video').YTPlayer({\n        fitToBackground: true,\n        videoId: attr.youtubeBackgroundVideo\n      });\n    }\n  };\n}\n'use strict';\n\nangular.module('app').filter('unsafe', unsafeFilter);\n\n/** @ngInject */\nfunction unsafeFilter($sce) {\n  return $sce.trustAsHtml;\n}\n'use strict';\n\nangular.module('app').filter('i18n', i18nFilter);\n\n/** @ngInject */\nfunction i18nFilter($translate) {\n  return function (hash) {\n    return hash[$translate.use()] || _(hash).values().first();\n  };\n}\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nangular.module('app').directive('timeline', [\"$window\", \"$filter\", \"$translate\", \"Timeline\", function ($window, $filter, $translate, Timeline) {\n  return {\n    restrict: 'E',\n    scope: {\n      meta: '=',\n      step: '='\n    },\n    replace: true,\n    template: '<div class=\"timeline\"><svg class=\"timeline__chart\"></svg></div>',\n    link: function link(scope, element) {\n      return new (function () {\n        function _class() {\n          var _this = this;\n\n          _classCallCheck(this, _class);\n\n          // Get i18n filter function\n          this.i18n = $filter('i18n');\n          // Resize the parent element to fit to the screen\n          this.fit();\n          // Create a SVG and append it to the element\n          this.svg = d3.select(element[0]).select('svg');\n          // Create a Timeline instance\n          this.timeline = new Timeline(this.svg);\n          // Use dynamic sizes\n          this.timeline.config(this.bounding());\n          // Watch for change on the step attribute\n          scope.$watch('step', function (step) {\n            // Don't go too far!\n            if (step < scope.meta.length) {\n              // Draw the timeline at a given step\n              _this.draw(step);\n            }\n          });\n          // Watch for windows resize\n          angular.element($window).on(this.windowResizeEvent, _.throttle(this.resize.bind(this), 150));\n          // Watch for scope destruction\n          scope.$on('$destroy', function () {\n            return angular.element($window).off(_this.windowResizeEvent);\n          });\n        }\n\n        _createClass(_class, [{\n          key: 'bounding',\n          value: function bounding() {\n            // Get SVG sizes\n            return _.pick(this.svg.node().getBoundingClientRect(), ['width', 'height']);\n          }\n          // Get last available data for the given step\n\n        }, {\n          key: 'data',\n          value: function data(step) {\n            return step >= 0 ? scope.meta[step].data || this.data(step - 1) : [];\n          }\n        }, {\n          key: 'smoothing',\n          value: function smoothing(step) {\n            return (scope.meta[step] || {}).smoothing || 0;\n          }\n        }, {\n          key: 'draw',\n          value: function draw(step) {\n            this.timeline.config({\n              yunit: this.i18n(scope.meta[step].yaxislabel),\n              highlights: this.i18n(scope.meta[step].highlights),\n              smoothing: this.smoothing(step),\n              rulers: [[2004, $translate.instant('timeline.rulers.10-new-country')], [2007, $translate.instant('timeline.rulers.romania-bulgaria')], [2013, $translate.instant('timeline.rulers.croatia')]],\n              type: scope.meta[step].charttype,\n              min: scope.meta[step].min,\n              max: scope.meta[step].max\n            });\n            // Configure the chart with the new step\n            this.timeline.draw(this.data(step));\n          }\n        }, {\n          key: 'resize',\n          value: function resize() {\n            // Parent element must fit to the new window's height\n            this.fit();\n            // Use dynamic sizes\n            this.timeline.config(this.bounding());\n            // And redraw at the current step\n            this.draw(scope.step);\n          }\n        }, {\n          key: 'fit',\n          value: function fit() {\n            angular.element(element).css('height', angular.element(window).height() - angular.element(element).offset().top);\n          }\n          // Uniq event on window element to destroy it with the directive\n\n        }, {\n          key: 'windowResizeEvent',\n          get: function get() {\n            // Create the event tken only once\n            this._windowResizeEvent = this._windowResizeEvent || _.uniqueId() + ' resize';\n            // Simply return the event string\n            return this._windowResizeEvent;\n          }\n        }]);\n\n        return _class;\n      }())();\n    }\n  };\n}]);\n'use strict';\n\nangular.module('app').constant('TIMELINE_COLORS', chroma.brewer.Spectral).constant('TIMELINE_CONFIG', {\n  height: {\n    name: 'height',\n    description: 'The height of the chart.',\n    value: 500,\n    type: 'number',\n    units: 'px',\n    category: 'Size'\n  },\n  width: {\n    name: 'width',\n    description: 'The width of the chart.',\n    value: 800,\n    units: 'px',\n    type: 'number',\n    category: 'Size'\n  },\n  padding: {\n    name: 'padding',\n    description: 'Space between the chart and the SVG borders.',\n    type: 'object',\n    units: 'px',\n    category: 'Size',\n    value: { top: 20, bottom: 40, left: 20, right: 20 }\n  },\n  transition: {\n    name: 'transition',\n    description: 'Transition delay.',\n    type: 'number',\n    units: 'ms',\n    value: 700\n  },\n  smoothing: {\n    name: 'smoothing',\n    description: 'Moving average amplitude',\n    type: 'number',\n    value: 0\n  },\n  type: {\n    name: 'type',\n    description: 'Type of the visualization',\n    type: 'string',\n    value: 'line',\n    setter: function setter(newValue) {\n      return _.kebabCase(newValue);\n    }\n  },\n  yunit: {\n    name: 'yunit',\n    description: 'Unit of Y axis',\n    type: 'string',\n    value: ''\n  },\n  min: {\n    name: 'min',\n    description: 'Force the minimum value on the y axis',\n    type: 'number',\n    value: null\n  },\n  max: {\n    name: 'max',\n    description: 'Force the maximum value on the y axis',\n    type: 'number',\n    value: null\n  },\n  highlights: {\n    name: 'highlights',\n    type: 'array',\n    value: []\n  },\n  rulers: {\n    name: 'rulers',\n    description: 'A hash of rulers to display alongside the x axis',\n    type: 'array',\n    value: [[2004, '10 new countries join the EU'], [2007, 'Romania and Bulgaria join'], [2013, 'Croatia joins']]\n  }\n});\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nangular.module('app').service('Timeline', [\"TIMELINE_CONFIG\", \"TIMELINE_COLORS\", \"$translate\", \"$filter\", function (TIMELINE_CONFIG, TIMELINE_COLORS, $translate, $filter) {\n  var Timeline = function (_Koto) {\n    _inherits(Timeline, _Koto);\n\n    function Timeline(svg) {\n      _classCallCheck(this, Timeline);\n\n      // define configs\n      var _this = _possibleConstructorReturn(this, (Timeline.__proto__ || Object.getPrototypeOf(Timeline)).call(this, svg));\n\n      _this.configs = TIMELINE_CONFIG;\n\n      // Bind local method to this\n      _this.transitionValues = _this.transitionValues.bind(_this);\n      _this.isHighlighted = _this.isHighlighted.bind(_this);\n      _this.updateBubbles = _this.updateBubbles.bind(_this);\n      _this.resetBubbles = _this.resetBubbles.bind(_this);\n      _this.deleteBubbles = _this.deleteBubbles.bind(_this);\n      _this.highlightGroups = _this.highlightGroups.bind(_this);\n      _this.updateLabel = _this.updateLabel.bind(_this);\n      _this.bindLayer = _this.bindLayer.bind(_this);\n      _this.colors = _this.colors.bind(_this);\n      _this.categoryColors = _this.categoryColors.bind(_this);\n\n      // Create scale\n      _this.xScale = d3.scaleLinear();\n      _this.yScale = d3.scaleLinear();\n\n      // Create axis's layers\n      _this.base.append(\"g.axis.axis--x\");\n      _this.base.append(\"g.axis.axis--y\");\n      // Create ruler layer\n      _this.base.append('g.ruler');\n      // Create shapes layers\n      var area = _this.base.append('g.area');\n      var line = _this.base.append('g.line');\n      var label = _this.base.append('g.label');\n      // Create interaction layer\n      _this.base.append('rect.event').on('mousemove', _this.updateBubbles).on('mouseout', _this.resetBubbles);\n      // Create a bubbles layer\n      _this.base.append('g.bubble');\n\n      // Create a drop-shadow filter\n      _this.base.append('filter#dropshadow').attrs({ height: '130%' }).append('feGaussianBlur').attrs({ in: 'SourceAlpha', stdDeviation: 2 }).select(_this.parent).append('feOffset').attrs({ dx: 0, dy: 2, result: 'offsetblur' }).select(_this.parent).append('feFlood').attr('flood-opacity', 0.4).select(_this.parent).append('feComposite').attrs({ in2: \"offsetblur\", operator: \"in\" }).select(_this.parent).append('feMerge').append('feMergeNode').select(_this.parent).append('feMergeNode').attr('in', \"SourceGraphic\");\n\n      // Function to draw a line\n      _this.line = d3.line().x(function (d) {\n        return _this.xScale(d.id);\n      }).y(function (d) {\n        return _this.yScale(d.value);\n      });\n\n      // Function to draw an area\n      _this.area = d3.area().x(function (d) {\n        return _this.xScale(d.id);\n      }).y0(function (d) {\n        return _this.isStacked ? _this.yScale(d.stack[0]) : _this.height;\n      }).y1(function (d) {\n        return _this.yScale(d.value);\n      });\n\n      // Setup areas' layer\n      _this.layer('area', area, angular.extend(_this.bindLayer(_this.area), {\n        dataBind: function dataBind(data) {\n          // Disable on lines\n          var rows = data.type === 'line' ? [] : data.rows.reverse();\n          return this.selectAll('.area__group').data(rows, function (d) {\n            return d.id;\n          });\n        },\n        insert: function insert(selection) {\n          // Add the path to the current selection and clip its path the rect\n          return selection.append('path.area__group').classed('highlighted', _this.isHighlighted).style('opacity', function (d) {\n            return _this.isHighlighted(d) ? 1 : 0.3;\n          }).attr('d', function (d) {\n            return _this.area(d.values);\n          }).style('fill', _this.colors);\n        }\n      }));\n      // Setup lines' layer\n      _this.layer('line', line, angular.extend(_this.bindLayer(_this.line), {\n        dataBind: function dataBind(data) {\n          return this.selectAll('.line__group').data(data.rows, function (d) {\n            return d.id;\n          });\n        },\n        insert: function insert(selection) {\n          // Add the path to the current selection and clip its path the rect\n          return selection.append('path.line__group').classed('highlighted', _this.isHighlighted).style('opacity', function (d) {\n            return _this.isHighlighted(d) ? 1 : 0.3;\n          }).attr('d', function (d) {\n            return _this.line(d.values);\n          }).style('stroke', _this.colors);\n        }\n      }));\n      // Setup labels layer\n      _this.layer('label', label, {\n        dataBind: function dataBind(data) {\n          return this.selectAll('.label text').data(data.rows, function (d) {\n            return d.id;\n          });\n        },\n        insert: function insert(selection) {\n          return selection.append('text').text(function (d) {\n            return d.id;\n          }).classed('highlighted', _this.isHighlighted).attr(\"text-anchor\", \"end\").attr(\"dy\", '-1em').attr(\"dx\", '-1em').call(_this.updateLabel).style('opacity', 0);\n        },\n        events: {\n          'enter:transition': function enterTransition(t) {\n            return t.duration(_this.c('transition')).style('opacity', 1);\n          },\n          'update': function update(selection) {\n            return selection.classed('highlighted', _this.isHighlighted);\n          },\n          'update:transition': function updateTransition(t) {\n            return t.duration(_this.c('transition')).call(_this.updateLabel);\n          },\n          'merge': function merge(selection) {\n            return selection.classed('highlighted', _this.isHighlighted);\n          },\n          'merge:transition': function mergeTransition(t) {\n            return t.duration(_this.c('transition')).call(_this.updateLabel);\n          },\n          'exit:transition': function exitTransition(t) {\n            return t.duration(_this.c('transition')).style('opacity', 0).remove();\n          }\n        }\n      });\n      return _this;\n    }\n\n    _createClass(Timeline, [{\n      key: 'formatY',\n      value: function formatY(n) {\n        return $filter('number')(n, 0);\n      }\n    }, {\n      key: 'updateBubbles',\n      value: function updateBubbles() {\n        var _this2 = this;\n\n        // Helper function to move all groups\n        var moveGroup = function moveGroup(selection) {\n          selection.attr('transform', function (d) {\n            return 'translate(' + _this2.c('padding').left + ', ' + _this2.yScale(d.value) + ')';\n          });\n          // Move text with the right anchor\n          selection.select('text').attr('text-anchor', _this2.half < anchorX ? 'end' : 'start').each(_.partial(function insert(that) {\n            var text = d3.select(this);\n            // Remove all children from text element\n            text.selectAll(\"*\").remove();\n            // Add values on multiline\n            text.tspans(function (d) {\n              return [d.year, d.id, that.formatY(d.value)];\n            });\n            // Get size of the text box\n            var bbox = text.node().getBBox();\n            text.attrs({ y: that.c('padding').top });\n            // To add padding outside the box\n            var p = 2;\n            // Add rect as background\n            selection.select('rect').attrs({\n              x: bbox.x - p * 2,\n              y: bbox.y - p,\n              width: bbox.width + 4 * p,\n              height: bbox.height + 2 * p\n            });\n          }, _this2));\n          return selection;\n        };\n        // Get the value for this y position\n        var value = this.yScale.invert(d3.event.layerY);\n        // Year value at this for this x position\n        var y = Math.round(this.xScale.invert(d3.event.layerX));\n        // Get the closest year in the dataset\n        var year = _.first(this.data.years.sort(function (a, b) {\n          return Math.abs(y - a) - Math.abs(y - b);\n        }));\n        // Get the anchor value for this year\n        var anchorX = this.xScale(year);\n        // Simplify rows to extract only the data for the current year\n        var data = _.chain(this.data.rows).map(function (r) {\n          var row = _.find(r.values, { id: year });\n          return angular.extend(r, {\n            year: year,\n            value: row.value,\n            hover: value >= row.stack[0] && value <= row.stack[1]\n          });\n          // Then find the closest group according to y position\n        }).thru(function (rows) {\n          if (_this2.isStacked) {\n            rows = _.filter(rows, { hover: true });\n          } else {\n            rows = rows.sort(function (a, b) {\n              // Iterate over every row to find the smallest distance\n              return Math.abs(value - a.value) - Math.abs(value - b.value);\n            });\n          }\n          return rows;\n          // Return an array with only the irst value\n        }).first().castArray().compact().value();\n        // The layer that holds bubbles\n        var groups = this.base.select('.bubble')\n        // Move the layer on the right year\n        .call(this.translate(anchorX, this.c('padding').top))\n        // Create group for each row\n        .selectAll('.bubble__group')\n        // JOIN data to for the selected year\n        .data(data, function (d) {\n          return d.id;\n        });\n        // REMOVE old bubbles\n        groups.exit().remove();\n        // UPDATE current bubbles\n        groups.call(moveGroup);\n        // CREATE new bubbles\n        var entering = groups.enter().append('g').classed('bubble__group', true);\n        // Add corner points\n        entering.append('circle').attrs({\n          'cx': 0, 'cy': 0, 'r': 5,\n          'stroke': this.categoryColors,\n          'stroke-width': 5,\n          'fill': function fill(d) {\n            var c = _this2.categoryColors(d);\n            return chroma.mix(c, _this2.contrast(c));\n          }\n        });\n        // Add text label\n        entering.append('text').style('fill', _.flow(this.categoryColors, this.contrast));\n        // Add text background\n        entering.insert('rect', ':first-child').attrs({ rx: 2, ry: 2 }).style('fill', this.categoryColors);\n        entering.attr('fill', 'red').style('filter', 'url(#dropshadow)').call(moveGroup);\n        // Highlight groups\n        this.highlightGroups(_.map(data, 'id'));\n      }\n    }, {\n      key: 'resetBubbles',\n      value: function resetBubbles() {\n        // Delete all bubbles\n        this.deleteBubbles();\n        // Remove highlighted groups by passing an empty array of ids\n        this.highlightGroups();\n      }\n    }, {\n      key: 'deleteBubbles',\n      value: function deleteBubbles() {\n        this.base.selectAll('.bubble__group').remove();\n      }\n    }, {\n      key: 'parent',\n      value: function parent() {\n        return this.parentNode;\n      }\n    }, {\n      key: 'bindLayer',\n      value: function bindLayer(pathFn) {\n        var _this3 = this;\n\n        return {\n          events: {\n            enter: function enter(selection) {\n              // Create a unique id for this element clip\n              var id = _.uniqueId('rectClip-');\n              // Add the clip to the current selection\n              var clipRect = _this3.base.append(\"clipPath\").attr(\"id\", id).append(\"rect\");\n              // Clip path to the current selection\n              selection.attr('clip-path', 'url(#' + id + ')');\n              // Apply the transition on the clip's rect\n              clipRect.attrs({ width: 0, height: _this3.height }).transition().duration(_this3.c('transition')).attr('width', _this3.width)\n              // After the transition ends\n              .on(\"end\", function end() {\n                // Remove the clip-path from the selection\n                selection.attr('clip-path', null);\n                // And remove its holding element\n                d3.select(this.parentNode).remove();\n              });\n            },\n            merge: this.transitionValues(pathFn),\n            update: this.transitionValues(pathFn),\n            exit: function exit(selection) {\n              selection.transition().duration(_this3.c('transition')).style('opacity', 0).on('end', function () {\n                return selection.remove();\n              });\n            }\n          }\n        };\n      }\n    }, {\n      key: 'transitionValues',\n      value: function transitionValues(pathFn) {\n        var _this4 = this;\n\n        return function (selection) {\n          selection.transition().duration(_this4.c('transition')).style('opacity', function (d) {\n            return _this4.isHighlighted(d) ? 1 : 0.3;\n          }).attr(\"d\", function (d) {\n            return pathFn(d.values);\n          });\n        };\n      }\n    }, {\n      key: 'updateLabel',\n      value: function updateLabel(selection) {\n        var _this5 = this;\n\n        return selection.attr(\"x\", function (d) {\n          return _this5.xScale(_.last(d.values).id);\n        }).attr(\"y\", function (d) {\n          var row = _.last(d.values);\n          return _this5.yScale(row.value);\n        });\n      }\n    }, {\n      key: 'isHighlighted',\n      value: function isHighlighted(d) {\n        return !this.hasHighligths || this.c('highlights').indexOf(d.id) > -1;\n      }\n    }, {\n      key: 'highlightGroups',\n      value: function highlightGroups() {\n        var _this6 = this;\n\n        var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        // True if the given set of ids includes the selection\n        var includes = function includes(d) {\n          return ids.indexOf(d.id) > -1;\n        };\n        // Change opacity and stroke accordingly\n        this.base.selectAll('.line__group,.area__group').style('opacity', function (d) {\n          return includes(d) || _this6.isHighlighted(d) ? 1 : 0.3;\n        });\n        this.base.selectAll('.line__group').style('stroke', function (d) {\n          return includes(d) ? _this6.categoryColors(d) : _this6.colors(d);\n        });\n        this.base.selectAll('.area__group').style('fill', function (d) {\n          return includes(d) ? _this6.categoryColors(d) : _this6.colors(d);\n        });\n      }\n    }, {\n      key: 'contrast',\n      value: function contrast(c) {\n        return chroma(c).luminance() > 0.5 ? 'black' : 'white';\n      }\n    }, {\n      key: 'colors',\n      value: function colors(d) {\n        // return a different color if the element is not highlighted\n        var color = this.categoryColors(d);\n        // return a different color if the element is not highlighted\n        return this.isHighlighted(d) ? color : chroma(color).desaturate(1).hex();\n      }\n    }, {\n      key: 'categoryColors',\n      value: function categoryColors(d) {\n        // Create color schema if undefined\n        if (!this._colors) {\n          this._colors = d3.scaleOrdinal(TIMELINE_COLORS);\n        }\n        return this._colors(d.id);\n      }\n    }, {\n      key: 'smooth',\n      value: function smooth(hash) {\n        var _this7 = this;\n\n        // Iterate over the hash\n        _.each(hash, function (value, key) {\n          // Skip non-numeric keys and the first year\n          if (!isNaN(key) && hash.hasOwnProperty(Number(key) - 1)) {\n            // Every values to use in the moving average\n            var values = [];\n            // Go backward and forward the current year\n            for (var i = -_this7.c('smoothing'); i <= _this7.c('smoothing'); i++) {\n              // Build the hash key to the year\n              var year = Number(key) + i;\n              // Since the mean function ignore undefined element, we do not check\n              // that there is a value for the year!\n              values.push(hash[year]);\n            }\n            // Calculate the mean for all values\n            hash[key] = d3.mean(values);\n          }\n        });\n        return hash;\n      }\n    }, {\n      key: 'transform',\n      value: function transform(data) {\n        var _this8 = this;\n\n        // Extract years from the first line\n        var years = this.years(data[0]);\n        // Smooth all the rows\n        data = data.map(this.smooth.bind(this));\n        // Get groups of data\n        var groups = _.chain(data).map(function (r) {\n          return _.values(r).pop();\n        }).value();\n        // Transpose data to be able to stack them\n        var transpose = _.map(years, function (year) {\n          return angular.extend({ year: year }, _.reduce(groups, function (hash, group, i) {\n            hash[group] = data[i][year];\n            return hash;\n          }, {}));\n        });\n        // Stack data for stacked representation\n        var stack = d3.stack().keys(groups)(transpose);\n        // Create an object for each group\n        var rows = _.reduce(data, function (res, hash, i) {\n          // Create a new object as row, describing this group\n          res.push({\n            // The last element of this hash is the group id\n            id: $translate.instant('timeline.labels.' + hash.label),\n            // Collect value for each year\n            values: _.map(years, function (year) {\n              // Create a stack for this year\n              var yearStack = _.find(stack[i], function (d) {\n                return d.data.year === year;\n              });\n              // Returns a hash\n              return {\n                id: year,\n                stack: yearStack,\n                value: _this8.isStacked ? yearStack[1] : hash[year]\n              };\n            })\n          });\n          return res;\n        }, []);\n        // Return an object with several precalculated fields\n        return {\n          years: years, rows: rows, stack: stack,\n          // Save the type of the chart for nested access\n          type: this.c('type'),\n          // First year in this dataset\n          begin: years[0],\n          // Last year in this dataset\n          end: years[years.length - 1],\n          // Minimum value among all row\n          min: d3.min(rows, function (c) {\n            return d3.min(c.values, function (d) {\n              return _this8.isStacked ? d.stack[0] : d.value;\n            });\n          }),\n          // Maximum value among all row\n          max: d3.max(rows, function (c) {\n            return d3.max(c.values, function (d) {\n              return d.value;\n            });\n          })\n        };\n      }\n    }, {\n      key: 'years',\n      value: function years(hash) {\n        // Extract year from a given object\n        return _.chain(hash).keys().remove(function (y) {\n          return !isNaN(y);\n        }).map(function (y) {\n          return Number(y);\n        }).sort().value();\n      }\n    }, {\n      key: 'translate',\n      value: function translate() {\n        var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        return function (selection) {\n          return selection.attr('transform', 'translate(' + left + ', ' + top + ')');\n        };\n      }\n    }, {\n      key: 'isYearVisible',\n      value: function isYearVisible(year) {\n        // Year must strictly in bounds\n        return year >= this.data.begin && year < this.data.end;\n      }\n    }, {\n      key: 'updateRulers',\n      value: function updateRulers() {\n        var _this9 = this;\n\n        var t = d3.transition().duration(this.c('transition'));\n        var moveGroup = function moveGroup(selection) {\n          return selection.attr('transform', function (d) {\n            var left = _this9.c('padding').left + _this9.xScale(d[0]);\n            var top = _this9.c('padding').top;\n            return 'translate(' + left + ', ' + top + ')';\n          });\n        };\n        var data = this.c('rulers');\n        // Reove rulers that are under 0\n        data = data.filter(function (d) {\n          return _this9.isYearVisible(d[0]);\n        });\n        // JOIN new data to rulers\n        var rulers = this.base.select('.ruler').selectAll('.ruler__group').data(data, function (d) {\n          return d[0];\n        });\n        // REMOVE old rulers\n        rulers.exit().transition(t).style(\"opacity\", 0).remove();\n        // UPDATE old rulers\n        rulers.transition(t).call(moveGroup).style('opacity', 1);\n        rulers.selectAll('line').transition(t).attr('y2', this.height);\n        // CREATE new rulers\n        var groups = rulers.enter().append('g').classed('ruler__group', true);\n        // Move the new ruler to the right position\n        groups.call(moveGroup).style('opacity', 0).transition(t).style('opacity', 1);\n        groups.append('line').attrs({ x1: 0, y1: 0, x2: 0, y2: this.height });\n        groups.append('text').text(function (d) {\n          return d[1];\n        }).attrs({ dy: '.85em', dx: '1em' });\n      }\n    }, {\n      key: 'preDraw',\n      value: function preDraw(data) {\n        var _this10 = this;\n\n        var p = this.c('padding');\n        var min = this.c('min');\n        var max = this.c('max');\n        // Fixed minimum value\n        if (min === null) {\n          min = this.isLine ? Math.max(data.min - (data.max - data.min) * 1 / 8, 0) : data.min;\n        }\n        // Fixed maximum value\n        if (max === null) {\n          max = data.max + (data.max - data.min) * 1 / 8;\n        }\n        // Save the data before the chart is rendered\n        this.data = data;\n        // Set xScale according to the size of the container and the last year\n        this.xScale.range([0, this.width]).domain([data.begin, data.end]);\n        this.yScale.range([this.height, 0]).domain([min, max]);\n        // Set sizes explicitely\n        this.base.attr(_.pick(this, ['width', 'height']));\n        this.base.classed('timeline__chart--highlights', this.hasHighligths);\n        this.base.selectAll('.line, .area, .event, .label').call(this.translate(p.left, p.top));\n        // Update rulers according to the new scales\n        this.updateRulers();\n        // Remove existing bubble\n        this.deleteBubbles();\n        // Resize interaction layer\n        this.base.select('.event').attrs(_.pick(this, ['width', 'height'])).call(this.translate(p.left, p.top));\n        // Select the existing X axis to update it\n        this.base.select('.axis--x').call(this.translate(p.left, this.height + p.top))\n        // Animate the axis creation/update\n        .transition().duration(this.c('transition')).call(d3.axisBottom(this.xScale).tickFormat(d3.format('')).tickValues(data.years.slice(1, -1)).tickSize(0).tickPadding(10));\n        // Select the existing Y axis to update it\n        this.base.select('.axis--y').call(this.translate(p.left, p.top))\n        // Animate the axis creation/update\n        .transition().duration(this.c('transition')).call(d3.axisLeft(this.yScale).tickSizeOuter(0).tickFormat(this.formatY).tickSize(-this.width))\n        // After the transition ends\n        .on(\"end\", function () {\n          // Add unit  to the last child\n          _this10.base.select('.axis--y .tick:last-child text').text(function (d) {\n            return _this10.formatY(d) + ' ' + (_this10.c('yunit') || '');\n          });\n        });\n        // Changed text alignment on y axis\n        this.base.selectAll('.axis--y text').attr(\"y\", 2).attr(\"x\", 0).attr(\"dx\", \"4px\").attr(\"dy\", \"-1em\").style(\"text-anchor\", \"start\");\n      }\n    }, {\n      key: 'width',\n      get: function get() {\n        return this.c('width') - this.c('padding').left - this.c('padding').right;\n      }\n    }, {\n      key: 'height',\n      get: function get() {\n        return this.c('height') - this.c('padding').top - this.c('padding').bottom;\n      }\n    }, {\n      key: 'half',\n      get: function get() {\n        return this.width / 2;\n      }\n    }, {\n      key: 'isStacked',\n      get: function get() {\n        return this.c('type') === 'stacked-area';\n      }\n    }, {\n      key: 'isLine',\n      get: function get() {\n        return this.c('type') === 'line';\n      }\n    }, {\n      key: 'isArea',\n      get: function get() {\n        return this.c('type') === 'area';\n      }\n    }, {\n      key: 'hasHighligths',\n      get: function get() {\n        return this.c('highlights').length > 0;\n      }\n    }]);\n\n    return Timeline;\n  }(Koto);\n\n  return Timeline;\n}]);\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MainController = function MainController($http, $translate, tmhDynamicLocale) {\n  'ngInject';\n  // Preload meta for the next step\n\n  _classCallCheck(this, MainController);\n\n  $http.get('data/meta.json', { cache: true }).then(function (r) {\n    return r.data;\n  });\n  // Change locale once\n  tmhDynamicLocale.set($translate.use().slice(0, 2));\n  // Get all links markup\n  var links = angular.element('head link[type=\\'text/css\\']');\n  // Current stylesheet\n  var currentLink = links.filter('[title=\\'index@' + $translate.use() + '\\']');\n  // Load the right stylesheet\n  links.not(currentLink).prop('disabled', true);\n  currentLink.prop('disabled', false);\n};\nMainController.$inject = [\"$http\", \"$translate\", \"tmhDynamicLocale\"];\n\nangular.module('app').component('main', {\n  templateUrl: 'app/main/main.html',\n  controller: MainController\n});\nangular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"main\\\">\\n  <ui-view>\\n    <div class=\\\"main__intro\\\" ui-sref=\\\"main.step({ index: 0 })\\\">\\n      <div class=\\\"main__intro__bg\\\" youtube-background-video=\\\"9pYqdGqyLdU\\\">\\n        <!-- Play \\'9pYqdGqyLdU\\' -->\\n      </div>\\n      <div class=\\\"main__intro__heading\\\">\\n        <div class=\\\"main__intro__heading__start\\\">\\n          <span ng-bind-html=\\\"\\'main.intro.read-story\\' | translate | unsafe\\\"></span>\\n          <i class=\\\"fa fa-play-circle\\\"></i>\\n        </div>\\n        <h1 class=\\\"main__intro__heading__title\\\" ng-bind-html=\\\"\\'main.intro.headline\\' | translate | unsafe\\\"></h1>\\n        <p class=\\\"main__intro__heading__abstract lead\\\" ng-bind-html=\\\"\\'main.intro.abstract\\' | translate | unsafe\\\"></p>\\n      </div>\\n    </div>\\n  </ui-view>\\n</div>\\n\");\n$templateCache.put(\"app/main/about/about.html\",\"<div class=\\\"main__about\\\">\\n  <h1 class=\\\"main__about__title\\\">\\n    {{ \\'main.about.title\\' | translate }}\\n  </h1>\\n  <div class=\\\"main__about__content\\\" ng-bind-html=\\\"\\'main.about.content\\' | translate | unsafe\\\"></div>\\n  <a ui-sref=\\\"main.step\\\">\\n    <i class=\\\"fa fa-arrow-left\\\"></i>\\n    Back to the story\\n  </a>\\n</div>\\n\");\n$templateCache.put(\"app/main/step/step.html\",\"<div class=\\\"main__step\\\">\\n  <div class=\\\"main__step__heading\\\">\\n    <h2 class=\\\"main__step__heading__title\\\">\\n      {{ $ctrl.current().slidetitle | i18n }}\\n    </h2>\\n    <div class=\\\"main__step__heading__controls\\\">\\n      <a ui-sref=\\\"main.about\\\" class=\\\"btn btn-link btn-sm main__step__heading__controls__about\\\">\\n        {{ \\'main.step.about\\' | translate}}\\n      </a>\\n      <div class=\\\"btn-group btn-group-sm\\\">\\n        <button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\"$ctrl.previous()\\\" ng-disabled=\\\"$ctrl.isFirst()\\\" ng-attr-title=\\\"{{ \\'main.step.previous\\' | translate }}\\\">\\n          <span class=\\\"sr-only\\\">{{ \\'main.step.previous\\' | translate }}</span>\\n          <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n        </button>\\n        <button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\"$ctrl.next()\\\" ng-disabled=\\\"$ctrl.isOutro()\\\" ng-attr-title=\\\"{{ \\'main.step.next\\' | translate }}\\\">\\n          <span class=\\\"sr-only\\\">{{ \\'main.step.next\\' | translate }}</span>\\n          <i class=\\\"fa fa-fw fa-chevron-right\\\"></i>\\n        </button>\\n      </div>\\n    </div>\\n    <div class=\\\"main__step__heading__progress\\\" ng-style=\\\"{ width: $ctrl.progress() + \\'%\\' }\\\"></div>\\n  </div>\\n  <div class=\\\"main__step__wrapper\\\" ng-swipe-right=\\\"$ctrl.previous()\\\" ng-swipe-left=\\\"$ctrl.next()\\\">\\n    <div class=\\\"main__step__description lead\\\">\\n      <span ng-bind-html=\\\"$ctrl.current().slidetext | i18n | unsafe\\\"></span>\\n    </div>\\n    <timeline meta=\\\"$ctrl.meta\\\" step=\\\"$ctrl.step\\\" ng-click=\\\"$ctrl.next()\\\"></timeline>\\n  </div>\\n  <div ng-if=\\\"$ctrl.isOutro()\\\" class=\\\"main__step__outro\\\">\\n    <div class=\\\"main__step__outro__backdrop\\\" ng-click=\\\"$ctrl.previous()\\\"></div>\\n    <div class=\\\"main__step__outro__content\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-8 lead\\\" ng-bind-html=\\\"\\'main.step.outro.content\\' | translate | unsafe\\\"></div>\\n        <div class=\\\"col-sm-4 main__step__outro__content__sidebar\\\">\\n          <img src=\\\"images/vroom.svg\\\" class=\\\"img-fluid w-100 pl-3 pr-3 pb-1 pt-0 hidden-xs-down\\\" alt=\\\"\\\">\\n          <p class=\\\"text-xs-center\\\">\\n            {{ \\'main.step.outro.get-link\\' | translate }}\\n          </p>\\n          <div class=\\\"input-group mb-1\\\">\\n            <input type=\\\"text\\\" readonly=\\\"readonly\\\" value=\\\"{{ $ctrl.location }}\\\" class=\\\"form-control\\\">\\n            <div class=\\\"input-group-btn\\\">\\n              <button class=\\\"btn btn-primary\\\" ui-zeroclip zeroclip-text=\\\"{{ $ctrl.location }}\\\">\\n                <i class=\\\"fa fa-copy fa-fw\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          <button class=\\\"btn btn-primary btn-block\\\" ui-sref=\\\"main.step({ index: 0 })\\\">\\n            <i class=\\\"fa fa-repeat fa-fw\\\"></i>\\n            {{ \\'main.step.outro.play-again\\' | translate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\");}]);\n'use strict';\n\nangular.module('app').config(routesConfig).run(gaRun);\n\n/** @ngInject */\nfunction routesConfig($stateProvider, $urlRouterProvider, $locationProvider) {\n  $locationProvider.html5Mode(false);\n  $urlRouterProvider.otherwise('/en_BE');\n\n  $stateProvider.state('main', {\n    url: '/:language',\n    component: 'main',\n    resolve: {\n      use: [\"$translate\", \"$stateParams\", function use($translate, $stateParams) {\n        'ngInject';\n\n        return $translate.use($stateParams.language);\n      }]\n    }\n  }).state('main.about', {\n    component: 'main.about',\n    url: '/about'\n  }).state('main.step', {\n    component: 'main.step',\n    // url: 'playing/:index',\n    params: {\n      index: {\n        value: null,\n        dynamic: true\n      }\n    },\n    resolve: {\n      meta: [\"$http\", function meta($http) {\n        'ngInject';\n\n        return $http.get('data/meta.json', { cache: true }).then(function (r) {\n          return r.data;\n        });\n      }]\n    }\n  }).state('main.step.outro', {\n    //url: '/outro'\n  });\n}\n\n/** @ngInject */\nfunction gaRun($transitions, $window, $location) {\n  // Redirect to login if route requires auth and you're not logged in\n  $transitions.onSuccess({}, function (transition, state) {\n    var identifier = transition.targetState().identifier();\n    // Build parameters string\n    var uri = _.reduce(transition.targetState().params(), function (uri, value, key) {\n      return uri.addQueryParam(key, value);\n    }, new Uri($location.url()));\n    // Send 'pageview' to Google Analytics\n    $window.ga('send', 'pageview', {\n      name: identifier.name || identifier,\n      page: uri.toString()\n    });\n  });\n}\n'use strict';\n\nangular.module('app').config(translateConfig);\n\n/** @ngInject */\nfunction translateConfig($translateProvider, tmhDynamicLocaleProvider, uiZeroclipConfigProvider) {\n  'ngInject';\n  // Load current locale\n\n  tmhDynamicLocaleProvider.localeLocationPattern('//code.angularjs.org/1.2.20/i18n/angular-locale_{{locale}}.js');\n  // config ZeroClipboard\n  uiZeroclipConfigProvider.setZcConf({\n    swfPath: 'bower_components/zeroclipboard/dist/ZeroClipboard.swf'\n  });\n  // Configure Angular Translate\n  $translateProvider.useStaticFilesLoader({\n    prefix: 'locales/',\n    suffix: '.json'\n  }).registerAvailableLanguageKeys(['en_BE', 'fr_FR'], {\n    '*': 'en_BE',\n    'fr': 'fr_FR',\n    'fr-FR': 'fr_FR',\n    'fr_FR': 'fr_FR',\n    'fr-BE': 'fr_FR',\n    'fr_BE': 'fr_FR',\n    'fr-CA': 'fr_FR',\n    'fr_CA': 'fr_FR'\n  }).determinePreferredLanguage().fallbackLanguage('en_BE').useLocalStorage().useSanitizeValueStrategy(null);\n}","'use strict';\n\nangular.module('app').constant('TIMELINE_COLORS', chroma.brewer.Spectral).constant('TIMELINE_CONFIG', {\n  height: {\n    name: 'height',\n    description: 'The height of the chart.',\n    value: 500,\n    type: 'number',\n    units: 'px',\n    category: 'Size'\n  },\n  width: {\n    name: 'width',\n    description: 'The width of the chart.',\n    value: 800,\n    units: 'px',\n    type: 'number',\n    category: 'Size'\n  },\n  padding: {\n    name: 'padding',\n    description: 'Space between the chart and the SVG borders.',\n    type: 'object',\n    units: 'px',\n    category: 'Size',\n    value: { top: 20, bottom: 40, left: 20, right: 20 }\n  },\n  transition: {\n    name: 'transition',\n    description: 'Transition delay.',\n    type: 'number',\n    units: 'ms',\n    value: 700\n  },\n  smoothing: {\n    name: 'smoothing',\n    description: 'Moving average amplitude',\n    type: 'number',\n    value: 0\n  },\n  type: {\n    name: 'type',\n    description: 'Type of the visualization',\n    type: 'string',\n    value: 'line',\n    setter: function setter(newValue) {\n      return _.kebabCase(newValue);\n    }\n  },\n  yunit: {\n    name: 'yunit',\n    description: 'Unit of Y axis',\n    type: 'string',\n    value: ''\n  },\n  min: {\n    name: 'min',\n    description: 'Force the minimum value on the y axis',\n    type: 'number',\n    value: null\n  },\n  max: {\n    name: 'max',\n    description: 'Force the maximum value on the y axis',\n    type: 'number',\n    value: null\n  },\n  highlights: {\n    name: 'highlights',\n    type: 'array',\n    value: []\n  },\n  rulers: {\n    name: 'rulers',\n    description: 'A hash of rulers to display alongside the x axis',\n    type: 'array',\n    value: [[2004, '10 new countries join the EU'], [2007, 'Romania and Bulgaria join'], [2013, 'Croatia joins']]\n  }\n});","angular.module(\"app\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"main\\\">\\n  <ui-view>\\n    <div class=\\\"main__intro\\\" ui-sref=\\\"main.step({ index: 0 })\\\">\\n      <div class=\\\"main__intro__bg\\\" youtube-background-video=\\\"9pYqdGqyLdU\\\">\\n        <!-- Play \\'9pYqdGqyLdU\\' -->\\n      </div>\\n      <div class=\\\"main__intro__heading\\\">\\n        <div class=\\\"main__intro__heading__start\\\">\\n          <span ng-bind-html=\\\"\\'main.intro.read-story\\' | translate | unsafe\\\"></span>\\n          <i class=\\\"fa fa-play-circle\\\"></i>\\n        </div>\\n        <h1 class=\\\"main__intro__heading__title\\\" ng-bind-html=\\\"\\'main.intro.headline\\' | translate | unsafe\\\"></h1>\\n        <p class=\\\"main__intro__heading__abstract lead\\\" ng-bind-html=\\\"\\'main.intro.abstract\\' | translate | unsafe\\\"></p>\\n      </div>\\n    </div>\\n  </ui-view>\\n</div>\\n\");\n$templateCache.put(\"app/main/about/about.html\",\"<div class=\\\"main__about\\\">\\n  <h1 class=\\\"main__about__title\\\">\\n    {{ \\'main.about.title\\' | translate }}\\n  </h1>\\n  <div class=\\\"main__about__content\\\" ng-bind-html=\\\"\\'main.about.content\\' | translate | unsafe\\\"></div>\\n  <a ui-sref=\\\"main.step\\\">\\n    <i class=\\\"fa fa-arrow-left\\\"></i>\\n    Back to the story\\n  </a>\\n</div>\\n\");\n$templateCache.put(\"app/main/step/step.html\",\"<div class=\\\"main__step\\\">\\n  <div class=\\\"main__step__heading\\\">\\n    <h2 class=\\\"main__step__heading__title\\\">\\n      {{ $ctrl.current().slidetitle | i18n }}\\n    </h2>\\n    <div class=\\\"main__step__heading__controls\\\">\\n      <a ui-sref=\\\"main.about\\\" class=\\\"btn btn-link btn-sm main__step__heading__controls__about\\\">\\n        {{ \\'main.step.about\\' | translate}}\\n      </a>\\n      <div class=\\\"btn-group btn-group-sm\\\">\\n        <button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\"$ctrl.previous()\\\" ng-disabled=\\\"$ctrl.isFirst()\\\" ng-attr-title=\\\"{{ \\'main.step.previous\\' | translate }}\\\">\\n          <span class=\\\"sr-only\\\">{{ \\'main.step.previous\\' | translate }}</span>\\n          <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n        </button>\\n        <button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\"$ctrl.next()\\\" ng-disabled=\\\"$ctrl.isOutro()\\\" ng-attr-title=\\\"{{ \\'main.step.next\\' | translate }}\\\">\\n          <span class=\\\"sr-only\\\">{{ \\'main.step.next\\' | translate }}</span>\\n          <i class=\\\"fa fa-fw fa-chevron-right\\\"></i>\\n        </button>\\n      </div>\\n    </div>\\n    <div class=\\\"main__step__heading__progress\\\" ng-style=\\\"{ width: $ctrl.progress() + \\'%\\' }\\\"></div>\\n  </div>\\n  <div class=\\\"main__step__wrapper\\\" ng-swipe-right=\\\"$ctrl.previous()\\\" ng-swipe-left=\\\"$ctrl.next()\\\">\\n    <div class=\\\"main__step__description lead\\\">\\n      <span ng-bind-html=\\\"$ctrl.current().slidetext | i18n | unsafe\\\"></span>\\n    </div>\\n    <timeline meta=\\\"$ctrl.meta\\\" step=\\\"$ctrl.step\\\" ng-click=\\\"$ctrl.next()\\\"></timeline>\\n  </div>\\n  <div ng-if=\\\"$ctrl.isOutro()\\\" class=\\\"main__step__outro\\\">\\n    <div class=\\\"main__step__outro__backdrop\\\" ng-click=\\\"$ctrl.previous()\\\"></div>\\n    <div class=\\\"main__step__outro__content\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-8 lead\\\" ng-bind-html=\\\"\\'main.step.outro.content\\' | translate | unsafe\\\"></div>\\n        <div class=\\\"col-sm-4 main__step__outro__content__sidebar\\\">\\n          <img src=\\\"images/vroom.svg\\\" class=\\\"img-fluid w-100 pl-3 pr-3 pb-1 pt-0 hidden-xs-down\\\" alt=\\\"\\\">\\n          <p class=\\\"text-xs-center\\\">\\n            {{ \\'main.step.outro.get-link\\' | translate }}\\n          </p>\\n          <div class=\\\"input-group mb-1\\\">\\n            <input type=\\\"text\\\" readonly=\\\"readonly\\\" value=\\\"{{ $ctrl.location }}\\\" class=\\\"form-control\\\">\\n            <div class=\\\"input-group-btn\\\">\\n              <button class=\\\"btn btn-primary\\\" ui-zeroclip zeroclip-text=\\\"{{ $ctrl.location }}\\\">\\n                <i class=\\\"fa fa-copy fa-fw\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          <button class=\\\"btn btn-primary btn-block\\\" ui-sref=\\\"main.step({ index: 0 })\\\">\\n            <i class=\\\"fa fa-repeat fa-fw\\\"></i>\\n            {{ \\'main.step.outro.play-again\\' | translate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\");}]);"]}