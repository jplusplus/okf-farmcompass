"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();angular.module("app").directive("timeline",["$window","$filter","$translate","Timeline",function(e,t,i,n){return{restrict:"E",scope:{meta:"=",step:"="},replace:!0,template:'<div class="timeline"><svg class="timeline__chart"></svg></div>',link:function(a,s){return new(function(){function r(){var i=this;_classCallCheck(this,r),this.i18n=t("i18n"),this.fit(),this.svg=d3.select(s[0]).select("svg"),this.timeline=new n(this.svg),this.timeline.config(this.bounding()),a.$watch("step",function(e){e<a.meta.length&&i.draw(e)}),angular.element(e).on(this.windowResizeEvent,_.throttle(this.resize.bind(this),150)),a.$on("$destroy",function(){return angular.element(e).off(i.windowResizeEvent)})}return _createClass(r,[{key:"bounding",value:function(){return _.pick(this.svg.node().getBoundingClientRect(),["width","height"])}},{key:"data",value:function(e){return e>=0?a.meta[e].data||this.data(e-1):[]}},{key:"smoothing",value:function(e){return(a.meta[e]||{}).smoothing||0}},{key:"draw",value:function(e){this.timeline.config({yunit:this.i18n(a.meta[e].yaxislabel),highlights:this.i18n(a.meta[e].highlights),smoothing:this.smoothing(e),rulers:[[2004,i.instant("timeline.rulers.10-new-country")],[2007,i.instant("timeline.rulers.romania-bulgaria")],[2013,i.instant("timeline.rulers.croatia")]],type:a.meta[e].charttype,min:a.meta[e].min,max:a.meta[e].max}),this.timeline.draw(this.data(e))}},{key:"resize",value:function(){this.fit(),this.timeline.config(this.bounding()),this.draw(a.step)}},{key:"fit",value:function(){angular.element(s).css("height",angular.element(window).height()-angular.element(s).offset().top)}},{key:"windowResizeEvent",get:function(){return this._windowResizeEvent=this._windowResizeEvent||_.uniqueId()+" resize",this._windowResizeEvent}}]),r}())}}}]);
//# sourceMappingURL=../../maps/app/timeline/timeline-ff61a7e200.directive.js.map
